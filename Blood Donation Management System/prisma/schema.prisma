generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Donor {
  id               String     @id @default(uuid())
  fullName         String
  bloodType        String
  phone            String?
  email            String?
  age              Int?
  lastDonation     DateTime?
  location         String?
  // Detailed location fields
  region           String?
  city             String?
  subCity          String?
  woreda           String?
  kebele           String?
  street           String?
  homeNumber       String?
  latitude         Float?
  longitude        Float?
  availability     String?
  totalDonations   Int        @default(0)
  impactScore      Int        @default(0)
  profilePicture   String?
  medicalCondition String?
  donations        Donation[]
}

model Hospital {
  id                    String     @id @default(uuid())
  name                  String
  phone                 String?
  email                 String?
  contactPerson         String?
  location              String?
  // Detailed location fields
  region                String?
  city                  String?
  subCity               String?
  woreda                String?
  kebele                String?
  street                String?
  latitude              Float?
  longitude             Float?
  businessLicenseName   String?
  businessLicenseNumber String?
  hospitalType          String?
  profilePicture        String?
  requests              Request[]
  donations             Donation[]
}

model Request {
  id          String   @id @default(uuid())
  hospital    Hospital @relation(fields: [hospitalId], references: [id])
  hospitalId  String
  patient     String?
  bloodType   String
  urgency     String
  unitsNeeded Int
  status      String
  requestedAt DateTime @default(now())
}

model Donation {
  id           String   @id @default(uuid())
  donor        Donor    @relation(fields: [donorId], references: [id])
  donorId      String
  hospital     Hospital @relation(fields: [hospitalId], references: [id])
  hospitalId   String
  units        Int
  donationDate DateTime @default(now())
  status       String
}

model Inventory {
  id                String   @id @default(uuid())
  bloodType         String
  unitsAvailable    Int
  criticalThreshold Int
  lastUpdated       DateTime @default(now())
}
